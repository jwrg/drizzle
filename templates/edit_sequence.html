<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Edit Drizzle Sequence</title>
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <script src="/static/edit_sequence.js"></script>
    <div class="container">
      <h1>Drizzle</h1>
      <h3>Make it rain.</h3>
      <h2>Editing Sequence {{ id }}</h2>
      <ul class="entries">
        {% for seqid, obj in sequences.items() %}
        {% if seqid == id %}
        <li>
          <div class="box gradient">
            <ul class="entry">
              <form action="/sequences/edit/{{ id }}/" method="post">
                <li>
                  <label for="name" class="name">Name:</label>
                  <textarea id="name" class="name" name="name">{{ obj.name }}</textarea>
                </li>
                <br />
                <li>
                  <input type="hidden" class="inactive id" name="id" value="{{ id }}" />
                  <input type="hidden" class="inactive created" name="created" value="{{ obj.created }}" />
                  <label for="description" class="description">Description:</label>
                  <textarea id="description" class="description" name="description">{{ obj.description }}</textarea>
                </li>
                <br />
                <table id="sequence-table" class="sequence">
                  <tr>
                    <th>Zone #</th>
                    <th>Duration (minutes)</th>
                    <th><a class="append success" id="append_row" onClick="append_row()">+</a></th>
                  </tr>
                  {% for tuple in obj.sequence -%}
                  <tr>
                    <td>Zone <select id="select-{{ loop.index0 }}" name="select-{{ loop.index0 }}">
                        {% for num in range(1, num_zones + 1) -%}
                        <option value="{{ num }}" {% if num == tuple[0] %}selected{% endif %}>{{ num }}</option>
                        {% endfor %}</select>
                    </td>
                    <td><input type="number" id="time-{{ loop.index0 }}" name="time-{{ loop.index0 }}" min="1" max="120" value="{{ tuple[1] }}"/> minute{% if tuple[1] != 1 %}s{% endif %}</td>
                    <td><a class="delete warning" id="delete_row-{{ loop.index0 }}" onClick="delete_row(this)">x</a></td>
                  </tr>
                  {% endfor -%}
                </table>
                <br />
                <input type="submit" id="save" name="save" value="Save" />
                <input type="button" id="cancel" name="cancel" onClick="window.open('/sequences/','_parent')" value="Cancel" />
              </form>
            </ul>
          </div>
        </li>
        {% endif %}
        {% endfor %}
      </ul>
    </div>
  </body>
</html>

